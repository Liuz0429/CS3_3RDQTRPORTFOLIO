<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Q3 2nd Graded Exercise">
    <meta name="keywords" content="HTML Forms">
    <meta name="author" content="Liuz Cabrera">
    <title>HTML Forms</title>
    <!-- updated external css link to show how to share it between repository -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="../../assets/mowiewowie.png" sizes="32x32" type="image/png">
    <script src="./Q32Gform.js" defer></script>
   <style>
    body{
        padding: 25px;
        font-family: arial;
        width: 80%;
        margin-left: 10%;
        background-color: rgb(15, 53, 100);
    }

    header {
        background-color:#a887f7;
        width: fit-content;
        padding: 0.5rem;
        border: solid rgb(44, 44, 44) 3px;
    }

    table {
        border-collapse: collapse;
        width: 100%;
    }

    table, th, td {
        border: 3px solid black;
        padding: 5px;
        background-color: rgb(82, 192, 243);
        text-align: center;
        font-size: 1.1rem;
        box-shadow: 2px 2px 5px black;
    }

    .title {
        color: #2f42bd;
        background-color: cornflowerblue;
        width: fit-content;
        padding: 0.5rem;
        border: solid rgb(44, 44, 44) 3px;
    }

    label {
        background-color:#2f42bd;
        font-size: 1.5rem;
        padding: 0.8rem;
        margin-left: 0.2rem;
        margin-top: 1.2rem;
        color: white;
        border: solid rgb(44, 44, 44) 3px;
    }

    #message {
        margin-top: 2rem;
        font-size: 1.2rem;
        font-weight: bold;
        color: white;
        border: solid rgb(44, 44, 44) 3px;
        background-color:#2f42bd;
        padding: 0.5rem;
        width: fit-content;
    }
    </style>
  </head>
  <body>
     <header>
        <div>
            <h1>
                Show List of Students Who Signed Up 
            </h1>
            <h3>by Liuz Cabrera</h3>
        </div>
        <nav class="navbar">
            <a href="../../index.html"> Home </a> <br>
            <a href="Q3_2GBerylliumCabrera.html"> Create Account </a>
        </nav>
    </header>
    <section>
      <h1 class="title">Sign-ups Saved In Your Computer</h1>
    <label>
        Select A Club to Show:
        <select id="showCat" name="showCat">
          <option value="All">All</option>
          <option value="Volant">Volant</option>
          <option value="Ellipsis">Ellipsis</option>
          <option value="Kislap">Kislap</option>
          <option value="Intyale">Intyale</option>
          <option value="Invictus">Invictus</option>
        </select>
    </label>
    <button onclick="getClub()">Show Clubs</button>
    <p id="message"></p>
    <table id="results"> </table>

      
    </section>
    <script>
        // read from the localStorage saved as a string - to see if there are anything saved on the users coomputer
        let acctString = localStorage.getItem("accounts")
        if (!acctString) { accountList = "No Accounts Found" } // initialize the variable to contain the list of accounts object
        else {
            
            accountList = JSON.parse(acctString) // converts string into the correct data type in this case object    
            rowString = "<tr><th>Club</th><th>ID</th><th>Full Name</th><th>Grade</th><th>Email</th><th>Phone Number</th><th>Intern/Extern</th></tr>";
            // results.innerHTML = ""  // resets the table
            console.log(accountList)

            function getClub() { 
                let selectedClub = document.getElementById("showCat").value;
                rowString = "<tr><th>Club</th><th>ID</th><th>Full Name</th><th>Grade</th><th>Email</th><th>Phone Number</th><th>Intern/Extern</th></tr>";
                for (let key in accountList) {
                    if (selectedClub === "All" || accountList[key].club === selectedClub) {
                        rowString += "<tr>";
                        rowString += "<td>" + accountList[key].club + "</td>";
                        rowString += "<td>" + key + "</td>";
                        rowString += "<td>" + accountList[key].fname + "</td>";
                        rowString += "<td>" + accountList[key].glev + "</td>";
                        rowString += "<td>" + accountList[key].email + "</td>";
                        rowString += "<td>" + accountList[key].pnum + "</td>";
                        rowString += "<td>" + accountList[key].tern + "</td></tr>";
                    } else if (accountList[key].club !== selectedClub && rowString === "<tr><th>Club</th><th>ID</th><th>Full Name</th><th>Grade</th><th>Email</th><th>Phone Number</th><th>Intern/Extern</th></tr>") {
                        rowString = "<tr><th>No Sign-ups found for the club.</th></tr>";
                    }
                } 
                results.innerHTML = rowString;
                message.innerHTML = "Amount of sign-ups for the filtered club " + " is: " + (rowString.split("<tr>").length - 2)  ; 
            }
        } 
        
    </script>
  </body>
</html>